<!DOCTYPE html>
<html>
  <head>
    <title>Pay with Stripe</title>
    <script src="https://js.stripe.com/v3/"></script>
    <style>
      body {
        font-family: sans-serif;
        padding: 2rem;
        max-width: 500px;
        margin: auto;
      }
      #card-element {
        padding: 10px;
        border: 1px solid #ccc;
        margin-bottom: 1rem;
        border-radius: 4px;
      }
    </style>
  </head>
  <body>
    <h2>Complete your payment</h2>
    <form id="payment-form">
      <div id="card-element"><!-- Stripe Element will go here --></div>
      <button type="submit">Confirm</button>
      <div id="error-message" style="color: red; margin-top: 1rem;"></div>
    </form>

    <script>
      const stripe = Stripe("pk_test_51QzK6tG7utWo2rQv9eRzZQExYz0JzllLu7ub0UQcfZqKLMRS2D8MkOaUJ0oM6P4IF7pjbZ5g6L7V5oN9OD6PaEMW00MZnnPUvY");

      const elements = stripe.elements();
      const cardElement = elements.create('card');
      cardElement.mount('#card-element');

      const form = document.getElementById('payment-form');
      const errorMessage = document.getElementById('error-message');

      form.addEventListener('submit', async (event) => {
        event.preventDefault();

        const params = new URLSearchParams(window.location.search);
        const clientSecret = params.get('client_secret');

        if (!clientSecret) {
          errorMessage.textContent = "Missing client_secret in URL.";
          return;
        }

        const { error } = await stripe.confirmCardPayment(clientSecret, {
          payment_method: {
            card: cardElement,
          }
        });

        if (error) {
          errorMessage.textContent = error.message;
        } else {
          errorMessage.textContent = "Payment confirmed!";
        }
      });
    </script>
  </body>
</html>
